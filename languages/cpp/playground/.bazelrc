# Enable automatic configs based on platform
common --enable_platform_specific_config

# host_cxxopt used only for internal purposes: e.g. tools and binaries
# that need to execute during the build process itself
build:macos --host_cxxopt=-std=c++23 --cxxopt=-std=c++23
build:linux --host_cxxopt=-std=c++23 --cxxopt=-std=c++23
build:windows --host_cxxopt=/std:c++23 --cxxopt=/std:c++23

build:linux --action_env=CC='gcc-14'

## Nanobind related shortcuts

# nanobind's minsize.
build --flag_alias=minsize=@nanobind_bazel//:minsize
# nanobind's py-limited-api.
build --flag_alias=py_limited_api=@nanobind_bazel//:py-limited-api
# rules_python's Python version, should not collide with builtin --python_version.
build --flag_alias=target_python_version=@rules_python//python/config_settings:python_version
# rules_python's indicator to only use free-threaded toolchains for CPython 3.13+.
# Needs to be given _together with_ nanobind-bazel's `free_threading` flag.
build --flag_alias=free_threaded=@rules_python//python/config_settings:py_freethreaded
